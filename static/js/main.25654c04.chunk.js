(this["webpackJsonpmemcrab-test-task"]=this["webpackJsonpmemcrab-test-task"]||[]).push([[0],{12:function(n){n.exports=JSON.parse('{"M":5,"N":4,"X":3}')},19:function(n,e,t){"use strict";t.r(e);var r=t(6),a=t(2),c=t(17),u=t(4),o=t(3),i=function(n){return Object.fromEntries(Object.entries(n).map((function(n){var e=Object(u.a)(n,2);return[e[0],e[1].reduce((function(n,e){return n+e}),0)]})))},s=function(n){return Math.trunc(n.reduce((function(n,e){return n+e}),0)/n.length)},l=function(n){for(var e=[],t=n[0].length,r=function(t){var r=s(n.map((function(n){return n[t]})));e.push(r)},a=0;a<t;a++)r(a);return e},d=function(n,e,t){var r=s(n.map((function(n){return n[t]}))),a=Object(c.a)(e);return a[t]=r,a},m=function(n){var e=Object.keys(n);return Number(e[e.length-1])},b=function(n,e,t){var r=JSON.parse(JSON.stringify(n));return r[e]=t,r},f=function(n,e){var t=JSON.parse(JSON.stringify(n));return delete t[e],t},j=function(n,e){var t=e.rowIndex,r=e.colIndex,a=e.increment,c=JSON.parse(JSON.stringify(n));return c[t][r]+=a,c},v={matrix:{},rowsSums:{},columnsAverages:[]};e.default=function(){var n,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case o.c:var c=Object.values(t.payload);return Object(a.a)(Object(a.a)({},e),{},{matrix:t.payload,rowsSums:i(c),columnsAverages:l(c)});case o.a:var u=m(e.matrix)+1;return n=b(e.matrix,u,t.payload),Object(a.a)(Object(a.a)({},e),{},{matrix:b(e.matrix,u,t.payload),rowsSums:b(e.rowsSums,u,t.payload.reduce((function(n,e){return n+e}),0)),columnsAverages:l(Object.values(n))});case o.b:n=f(e.matrix,t.payload);var s=f(e.rowsSums,t.payload);return Object(a.a)(Object(a.a)({},e),{},{matrix:n,rowsSums:s,columnsAverages:l(Object.values(n))});case o.d:return n=j(e.matrix,Object(a.a)({},t.payload)),Object(a.a)(Object(a.a)({},e),{},{matrix:n,rowsSums:Object(a.a)(Object(a.a)({},e.rowsSums),{},Object(r.a)({},t.payload.rowIndex,e.rowsSums[t.payload.rowIndex]+1)),columnsAverages:d(Object.values(n),e.columnsAverages,t.payload.colIndex)});default:return e}}},3:function(n,e,t){"use strict";t.d(e,"c",(function(){return r})),t.d(e,"d",(function(){return a})),t.d(e,"a",(function(){return c})),t.d(e,"b",(function(){return u}));var r="INITIAL_ADD_MATRIX",a="UPDATE_MATRIX",c="ADD_ROW",u="DELETE_ROW"},38:function(n,e,t){"use strict";t.r(e);var r=t(8),a=t(1),c=t(0),u=t.n(c),o=t(15),i=t.n(o),s=t(7),l=t(11),d=t(6),m=t(4),b=t(17),f=t(2),j=t(9),v=t.n(j),O=t(3),p=function(n){var e=n.value,t=n.rowIndex,r=n.cellIndex,c=n.highlighted,u=n.withBackground,o=n.updateCell,i=n.onMouseOver,s=n.onMouseOut,l={className:c?"matrix__cell highlighted":u?"matrix__cell with-background":"matrix__cell"};return void 0!==t&&void 0!==r&&(l["data-cell"]="".concat(t,"-").concat(r),l.onClick=function(){return o(t,r,1)}),i&&(l.onMouseOver=i),s&&(l.onMouseOut=s),Object(a.jsxs)("div",Object(f.a)(Object(f.a)({},l),{},{children:[u&&Object(a.jsx)("span",{className:"matrix__cell-deco",style:{width:"".concat(e,"%")}}),e]}))},x={updateCell:function(n,e,t){return function(n,e,t){return{type:O.d,payload:{rowIndex:n,colIndex:e,increment:t}}}(n,e,t)}};p.protoTypes={value:v.a.number,rowIndex:v.a.number,cellIndex:v.a.number,updateCell:v.a.func};var h=Object(s.b)(null,x)(p),g=function(n){return n.matrix},w=function(n){return n.rowsSums},y=function(n){return n.columnsAverages};function M(){var n=Object(r.a)(["\n  display: block;\n  width: 200px;\n  height: 30px;\n  margin: 30px auto 30px;\n  background-color: lightblue;\n"]);return M=function(){return n},n}function _(){var n=Object(r.a)(["\n  background-color: lightcoral;\n"]);return _=function(){return n},n}function S(){var n=Object(r.a)(["\n  border-width: 1px;\n  border-radius: 4px;\n  cursor: pointer;\n"]);return S=function(){return n},n}var N=l.a.button(S()),I=Object(l.a)(N)(_()),A=Object(l.a)(N)(M()),k=function(n){return new Array(n).fill(0).map((function(n){return function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:999;return Math.trunc(n+Math.random()*(e-n))}()}))},C={initialAddMatrix:function(n){return function(n){return{type:O.c,payload:n}}(n)},addRow:function(n){return e=n,{type:O.a,payload:e};var e},deleteRow:function(n){return function(n){return{type:O.b,payload:n}}(n)}},J=Object(s.b)((function(n){return{matrix:g(n),rowsSums:w(n),columnsAverages:y(n)}}),C)((function(n){var e=n.M,t=n.N,r=n.X,u=n.matrix,o=n.rowsSums,i=n.columnsAverages,s=n.initialAddMatrix,l=n.addRow,f=n.deleteRow,j=(n.updateCell,n.className),v=Object(c.useState)([]),O=Object(m.a)(v,2),p=O[0],x=O[1],g=Object(c.useState)([]),w=Object(m.a)(g,2),y=w[0],M=w[1],_=Object(c.useState)({}),S=Object(m.a)(_,2),N=S[0],C=S[1];if(Object(c.useEffect)((function(){e&&t&&s(function(n,e){for(var t={},r=0;r<n;r++)t[r]=k(e);return t}(e,t))}),[]),!e||!t){var J=[];return!e&&J.push("Missing matrix rows"),!t&&J.push("Missing matrix columns"),Object(a.jsx)("div",{className:"errors",children:J.map((function(n){return Object(a.jsx)("div",{className:"errors__item",children:n})}))})}0!==p.length||r||x(["Missing amount of nearest values"]);var R=function(n){var e=function(n,e,t){for(var r,a,c=Object(b.a)(new Set(n.flat())).sort(),u=c.indexOf(e),o=[],i=0;i<t+1;i++)r||(r=c[u+i]?Math.abs(c[u+i]-c[u]):1/0),a||(a=c[u-i]?Math.abs(c[u-i]-c[u]):1/0),a>r?(o.push(c[u+i]),r=null):(o.push(c[u-i]),a=null);return o}(Object.values(u),n,r);M(e)},T=function(n){M([])},D=function(){C({})};return Object(a.jsxs)("div",{children:[Object(a.jsx)(A,{onClick:function(){return l(k(t))},children:"Add new row"}),Object(a.jsxs)("div",{className:j,children:[p.length>0&&Object(a.jsx)("div",{className:"warnings",children:p.map((function(n){return Object(a.jsx)("div",{className:"warnings__item",children:n})}))}),Object.entries(u).map((function(n){var e=Object(m.a)(n,2),t=e[0],r=e[1];return Object(a.jsxs)("div",{className:"matrix__row",children:[N[t]?N[t].map((function(n,e){return Object(a.jsx)(h,{value:n,rowIndex:t,cellIndex:e,withBackground:!0},e)})):r.map((function(n,e){return Object(a.jsx)(h,{value:n,rowIndex:t,cellIndex:e,onMouseOver:function(){return R(n)},onMouseOut:T,highlighted:y.includes(n)},e)})),Object(a.jsx)(h,{value:o[t],onMouseOver:function(){return function(n,e){var t=u[n];C(Object(d.a)({},n,t.map((function(n){return Math.trunc(n/e*100)}))))}(t,o[t])},onMouseOut:D},t),Object(a.jsx)(I,{onClick:function(){return f(t)},children:"Delete Row"})]},t)})),Object(a.jsx)("div",{className:"matrix__row",children:i.map((function(n,e){return Object(a.jsx)(h,{value:n},"column-sum-".concat(e))}))},"column-sums")]})]})})),R=t(13),T=t(26),D=t(19),E=(t(19).default,Object(R.createStore)(D.default,Object(T.devToolsEnhancer)())),X=function(n){n&&n instanceof Function&&t.e(3).then(t.bind(null,39)).then((function(e){var t=e.getCLS,r=e.getFID,a=e.getFCP,c=e.getLCP,u=e.getTTFB;t(n),r(n),a(n),c(n),u(n)}))},B=t(12);function F(){var n=Object(r.a)(["\n  position: relative;\n  display: grid;\n  grid-template-rows: repeat(",", 1fr);\n  grid-gap: 20px;\n  max-width: 100vw;\n  max-height: calc(100vh - 120px);\n  overflow: scroll;\n\n  & .matrix__row {\n    display: grid;\n    grid-template-columns: repeat(",", 1fr);\n    grid-gap: 20px;\n  }\n\n  & .matrix__cell {\n    min-width: 150px;\n    min-height: 30px;\n    line-height: 30px;\n    text-align: center;\n    border: 1px solid lightgrey;\n    cursor: pointer;\n\n    &.highlighted {\n      background-color: lightgreen;\n    }\n\n    &.with-background {\n      position: relative;\n\n      &::after {\n        content: ' %';\n      }\n\n      & .matrix__cell-deco {\n        position: absolute;\n        top: 0;\n        left: 0;\n        height: 100%;\n        background-color: lightgrey;\n        z-index: -1;\n      }\n    }\n  }\n"]);return F=function(){return n},n}var L=B.M,P=void 0===L?0:L,W=B.N,z=void 0===W?0:W,U=B.X,q=void 0===U?0:U,G=Object(l.a)(J)(F(),B.M+1,B.N+2);i.a.render(Object(a.jsx)(u.a.StrictMode,{children:Object(a.jsx)(s.a,{store:E,children:Object(a.jsx)(G,{M:P,N:z,X:q})})}),document.getElementById("root")),X()}},[[38,1,2]]]);
//# sourceMappingURL=main.25654c04.chunk.js.map