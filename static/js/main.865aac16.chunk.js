(this["webpackJsonpmemcrab-test-task"]=this["webpackJsonpmemcrab-test-task"]||[]).push([[0],{37:function(n,t,e){"use strict";e.r(t);var r=e(5),a=e(1),c=e(0),i=e.n(c),o=e(13),u=e.n(o),l=e(4),s=e(8),d=e(14),b=e(12),h=e(2),x=e(6),f=e.n(x),j=e(20),O=e.n(j),m="INITIAL_ADD_MATRIX",p="UPDATE_MATRIX",v="ADD_ROW",g="DELETE_ROW",w=function(n){var t=n.value,e=n.rowIndex,r=n.cellIndex,c=n.highlighted,i=n.withBackground,o=n.updateCell,u=n.onMouseOver,l=n.onMouseOut,s={className:O()("matrix__cell",{highlighted:c,"with-background":i})};return void 0!==e&&void 0!==r&&(s["data-cell"]="".concat(e,"-").concat(r),s.onClick=function(){return o(e,r,1)}),u&&(s.onMouseOver=u),l&&(s.onMouseOut=l),Object(a.jsxs)("div",Object(h.a)(Object(h.a)({},s),{},{children:[i&&Object(a.jsx)("span",{className:"matrix__cell-deco",style:{width:"".concat(t,"%")}}),t]}))},y={updateCell:function(n,t,e){return function(n,t,e){return{type:p,payload:{rowIndex:n,colIndex:t,increment:e}}}(n,t,e)}};w.protoTypes={value:f.a.number,rowIndex:f.a.number,cellIndex:f.a.number,updateCell:f.a.func};var M=Object(l.b)(null,y)(w),N=function(n){return n.matrix},_=e(25),I=function(n){return new Array(n).fill(0).map((function(n){return function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:999;return Math.trunc(n+Math.random()*(t-n))}()}))};function k(){var n=Object(r.a)(["\n  display: block;\n  width: 200px;\n  height: 30px;\n  margin: 30px auto 30px;\n  background-color: lightblue;\n"]);return k=function(){return n},n}function S(){var n=Object(r.a)(["\n  background-color: lightcoral;\n"]);return S=function(){return n},n}function A(){var n=Object(r.a)(["\n  border-width: 1px;\n  border-radius: 4px;\n  cursor: pointer;\n"]);return A=function(){return n},n}var T=s.a.button(A()),C=Object(s.a)(T)(S()),J=Object(s.a)(T)(k()),R={initialAddMatrix:function(n){return function(n){return{type:m,payload:n}}(n)},addRow:function(n){return{type:v,payload:n}},deleteRow:function(n){return function(n){return{type:g,payload:n}}(n)}},D=Object(l.b)((function(n){return{matrix:N(n)}}),R)((function(n){var t=n.M,e=n.N,r=n.X,i=n.matrix,o=n.initialAddMatrix,u=n.addRow,l=n.deleteRow,s=n.className,h=Object(c.useState)([]),x=Object(b.a)(h,2),f=x[0],j=x[1],O=Object(c.useState)([]),m=Object(b.a)(O,2),p=m[0],v=m[1],g=Object(c.useState)({}),w=Object(b.a)(g,2),y=w[0],N=w[1];if(Object(c.useEffect)((function(){t&&e&&o(function(n,t){for(var e={},r=0;r<n;r++)e[r]=I(t);return e}(t,e))}),[]),!t||!e){var k=[];return!t&&k.push("Missing matrix rows"),!e&&k.push("Missing matrix columns"),Object(a.jsx)("div",{className:"errors",children:k.map((function(n){return Object(a.jsx)("div",{className:"errors__item",children:n})}))})}0!==f.length||r||j(["Missing amount of nearest values"]);var S=function(n){var t=function(n,t,e){for(var r,a,c=Object(_.a)(new Set(n.flat())).sort(),i=c.indexOf(t),o=[],u=0;u<e+1;u++)r||(r=c[i+u]?Math.abs(c[i+u]-c[i]):1/0),a||(a=c[i-u]?Math.abs(c[i-u]-c[i]):1/0),a>r?(o.push(c[i+u]),r=null):(o.push(c[i-u]),a=null);return o}(Object.values(i),n,r);v(t)};return Object(a.jsxs)("div",{children:[f.length>0&&Object(a.jsx)("div",{className:"warnings",children:f.map((function(n){return Object(a.jsx)("div",{className:"warnings__item",children:n})}))}),Object(a.jsx)(J,{onClick:function(){return u(I(e))},children:"Add new row"}),Object(a.jsxs)("div",{className:s,children:[Object.entries(i).map((function(n){var t=Object(b.a)(n,2),e=t[0],r=t[1];return Object(a.jsxs)("div",{className:"matrix__row",children:[y[e]?y[e].map((function(n,t){return Object(a.jsx)(M,{value:n,rowIndex:e,cellIndex:t,withBackground:!0},t)})):r.map((function(n,t){return Object(a.jsx)(M,{value:n,rowIndex:e,cellIndex:t,onMouseOver:function(){return S(n)},onMouseOut:function(){return v([])},highlighted:p.includes(n)},t)})),Object(a.jsx)(M,{value:i[e].reduce((function(n,t){return n+t}),0),onMouseOver:function(n){return function(n,t){var e=Number(n.target.innerText),r=i[t];N(Object(d.a)({},t,r.map((function(n){return Math.trunc(n/e*100)}))))}(n,e)},onMouseOut:function(){return N({})}},e),Object(a.jsx)(C,{onClick:function(){return l(e)},children:"Delete Row"})]},e)})),Object(a.jsx)("div",{className:"matrix__row",children:new Array(e).fill(0).map((function(n,e){var r=Math.trunc(Object.values(i).map((function(n){return n[e]})).reduce((function(n,t){return n+t}),0)/t);return Object(a.jsx)(M,{value:r},"column-sum-".concat(e))}))},"column-sums")]})]})})),E=e(10),X=e(24),B=function(n){var t=Object.keys(n);return t.length>0?Number(t[t.length-1]):0},F=function(n,t,e){var r=JSON.parse(JSON.stringify(n));return r[t]=e,r},L=function(n,t){var e=JSON.parse(JSON.stringify(n));return delete e[t],e},P=function(n,t){var e=t.rowIndex,r=t.colIndex,a=t.increment,c=JSON.parse(JSON.stringify(n));return c[e][r]+=a,c},W={matrix:{}},z=function(){var n,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:W,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case m:return Object(h.a)(Object(h.a)({},t),{},{matrix:e.payload});case v:var r=B(t.matrix)+1;return n=F(t.matrix,r,e.payload),Object(h.a)(Object(h.a)({},t),{},{matrix:F(t.matrix,r,e.payload)});case g:return n=L(t.matrix,e.payload),Object(h.a)(Object(h.a)({},t),{},{matrix:n});case p:return n=P(t.matrix,Object(h.a)({},e.payload)),Object(h.a)(Object(h.a)({},t),{},{matrix:n});default:return t}},U=Object(E.createStore)(z,Object(X.devToolsEnhancer)()),q=function(n){n&&n instanceof Function&&e.e(3).then(e.bind(null,38)).then((function(t){var e=t.getCLS,r=t.getFID,a=t.getFCP,c=t.getLCP,i=t.getTTFB;e(n),r(n),a(n),c(n),i(n)}))},G=e(9);function H(){var n=Object(r.a)(["\n  position: relative;\n  display: grid;\n  grid-template-rows: repeat(",", 1fr);\n  grid-gap: 20px;\n  max-width: 100vw;\n  max-height: calc(100vh - 120px);\n  overflow: scroll;\n\n  & .matrix__row {\n    display: grid;\n    grid-template-columns: repeat(",", 1fr);\n    grid-gap: 20px;\n  }\n\n  & .matrix__cell {\n    min-width: 150px;\n    min-height: 30px;\n    line-height: 30px;\n    text-align: center;\n    border: 1px solid lightgrey;\n    cursor: pointer;\n\n    &.highlighted {\n      background-color: lightgreen;\n    }\n\n    &.with-background {\n      position: relative;\n\n      &::after {\n        content: ' %';\n      }\n\n      & .matrix__cell-deco {\n        position: absolute;\n        top: 0;\n        left: 0;\n        height: 100%;\n        background-color: lightgrey;\n        z-index: -1;\n      }\n    }\n  }\n"]);return H=function(){return n},n}var K=G.M,Q=void 0===K?0:K,V=G.N,Y=void 0===V?0:V,Z=G.X,$=void 0===Z?0:Z,nn=Object(s.a)(D)(H(),G.M+1,G.N+2);u.a.render(Object(a.jsx)(i.a.StrictMode,{children:Object(a.jsx)(l.a,{store:U,children:Object(a.jsx)(nn,{M:Q,N:Y,X:$})})}),document.getElementById("root")),q()},9:function(n){n.exports=JSON.parse('{"M":5,"N":4,"X":3}')}},[[37,1,2]]]);
//# sourceMappingURL=main.865aac16.chunk.js.map